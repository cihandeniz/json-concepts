<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="theme-color" content="#3eaf7c"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><title>Client Code Generation | json concepts</title><meta name="description" content="a meta-schema specification in JSON format"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.21">
    <link rel="preload" href="/json-concepts/assets/js/runtime~app.65f0731e.js" as="script"><link rel="preload" href="/json-concepts/assets/css/styles.105f13ad.css" as="style"><link rel="preload" href="/json-concepts/assets/js/9296.a783a415.js" as="script"><link rel="preload" href="/json-concepts/assets/js/app.755d80b6.js" as="script">
    <link rel="stylesheet" href="/json-concepts/assets/css/styles.105f13ad.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/json-concepts/" class=""><!----><span class="site-name">json concepts</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/json-concepts/use-cases/" class="nav-link router-link-active" aria-label="Use Cases"><!--[--><!--]--> Use Cases <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/json-concepts/specs/" class="nav-link" aria-label="Specs"><!--[--><!--]--> Specs <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/json-concepts/roadmap/" class="nav-link" aria-label="Roadmap"><!--[--><!--]--> Roadmap <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/json-concepts/proposals/" class="nav-link" aria-label="Proposals"><!--[--><!--]--> Proposals <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/codingatwill/json-concepts" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/json-concepts/use-cases/" class="nav-link router-link-active" aria-label="Use Cases"><!--[--><!--]--> Use Cases <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/json-concepts/specs/" class="nav-link" aria-label="Specs"><!--[--><!--]--> Specs <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/json-concepts/roadmap/" class="nav-link" aria-label="Roadmap"><!--[--><!--]--> Roadmap <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/json-concepts/proposals/" class="nav-link" aria-label="Proposals"><!--[--><!--]--> Proposals <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/codingatwill/json-concepts" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item active">Use Cases</p><ul class=""><li><!--[--><a href="/json-concepts/use-cases/" class="nav-link router-link-active sidebar-item" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/json-concepts/use-cases/01-configuration-files.html" class="nav-link sidebar-item" aria-label="Configuration Files"><!--[--><!--]--> Configuration Files <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/json-concepts/use-cases/02-client-code-generation.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="Client Code Generation"><!--[--><!--]--> Client Code Generation <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/json-concepts/use-cases/02-client-code-generation.html#example-case" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Example Case"><!--[--><!--]--> Example Case <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/json-concepts/use-cases/02-client-code-generation.html#with-concepts" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="With Concepts"><!--[--><!--]--> With Concepts <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/json-concepts/use-cases/02-client-code-generation.html#without-concepts" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Without Concepts"><!--[--><!--]--> Without Concepts <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="client-code-generation" tabindex="-1"><a class="header-anchor" href="#client-code-generation" aria-hidden="true">#</a> Client Code Generation</h1><p>Assume you are developing a web app, the back-end team publishes an api and shares a json file for their api specification.</p><h2 id="example-case" tabindex="-1"><a class="header-anchor" href="#example-case" aria-hidden="true">#</a> Example Case</h2><p>Let&#39;s say the back-end team shared the following schema;</p><p><code>SCHEMA: photos.service.json</code></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;/photos&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;post&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;base64&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;response&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;model&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#/ref&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;get&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;date&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;end&quot;</span><span class="token operator">:</span> <span class="token string">&quot;date&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;response&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
                <span class="token property">&quot;model&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#/photo&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;array&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;definitions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;ref&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;uid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;photo&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;uid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;url&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;date&quot;</span><span class="token operator">:</span> <span class="token string">&quot;date&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><blockquote><p>This schema is <strong>not</strong> OpenAPI, because of demonstration purposes.</p></blockquote><p>Now to consume this api from your web app, assume you need to write below code;</p><p><code>CODE: photos.client.js</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">photos</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">post</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">axios</span><span class="token punctuation">(</span>
                method<span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
                url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/photos</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
                <span class="token operator">...</span><span class="token function">parameters</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    content<span class="token operator">:</span> content
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token parameter">start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">axios</span><span class="token punctuation">(</span>
                method<span class="token operator">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span>
                url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/photos</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
                <span class="token operator">...</span><span class="token function">parameters</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    start<span class="token operator">:</span> start<span class="token punctuation">,</span>
                    end<span class="token operator">:</span> end
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">parameters</span><span class="token punctuation">(</span><span class="token parameter">method<span class="token punctuation">,</span> parameters</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> method <span class="token operator">===</span> <span class="token string">&quot;get&quot;</span>
            <span class="token operator">?</span> <span class="token punctuation">{</span> params<span class="token operator">:</span> parameters <span class="token punctuation">}</span>
            <span class="token operator">:</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> parameters <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        post<span class="token operator">:</span> post<span class="token punctuation">,</span>
        get<span class="token operator">:</span> get
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h2 id="with-concepts" tabindex="-1"><a class="header-anchor" href="#with-concepts" aria-hidden="true">#</a> With Concepts</h2><p>Here, json concepts can help you parse and structure given service schema, so that you can use a template engine to generate necessary client code.</p><p>Below concepts definition will cover given api schema;</p><p><code>CONCEPTS: service.concepts.json</code></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;$resource*&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;$method*&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;$parameter*&quot;</span><span class="token operator">:</span> <span class="token string">&quot;$type&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;!response&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;model&quot;</span><span class="token operator">:</span> <span class="token string">&quot;$model&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;type?&quot;</span><span class="token operator">:</span> <span class="token string">&quot;$type&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;definitions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;$definition*&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;$property*&quot;</span><span class="token operator">:</span> <span class="token string">&quot;$type&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>Now that you have defined every concept for the given api schema, we can make use of them to generate code with the following template;</p><p><code>TEMPLATE: client.template.js</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/* #resource */</span>
<span class="token keyword">function</span> <span class="token function">$resource$</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* #method */</span>
    <span class="token keyword">function</span> <span class="token function">$method$</span><span class="token punctuation">(</span><span class="token comment">/* #, */</span>$parameter$<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">axios</span><span class="token punctuation">(</span>
                method<span class="token operator">:</span> <span class="token string">&quot;$method<!--vuepress-ssr-app-->quot;</span><span class="token punctuation">,</span>
                url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/$resource$</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
                <span class="token operator">...</span><span class="token function">parameters</span><span class="token punctuation">(</span><span class="token string">&quot;$method<!--vuepress-ssr-app-->quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                    $parameter$<span class="token operator">:</span> $parameter$ <span class="token comment">// #parameter,</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/* / */</span>

    <span class="token keyword">function</span> <span class="token function">parameters</span><span class="token punctuation">(</span><span class="token parameter">method<span class="token punctuation">,</span> parameters</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> method <span class="token operator">===</span> <span class="token string">&quot;get&quot;</span>
            <span class="token operator">?</span> <span class="token punctuation">{</span> params<span class="token operator">:</span> parameters <span class="token punctuation">}</span>
            <span class="token operator">:</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> parameters <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        $method$<span class="token operator">:</span> $method$ <span class="token comment">// #method,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* / */</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><blockquote><p>We used <strong>codestache</strong> template syntax because of its readability. Below you can find a mustache version of the same code template.</p><details class="custom-container details"><summary>Mustache version</summary><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token punctuation">{</span><span class="token punctuation">{</span>#resource<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>resource<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span>#method<span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>method<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">{</span>#parameter<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">{</span>parameter<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">^</span>last<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>last<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>parameter<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">axios</span><span class="token punctuation">(</span>
              method<span class="token operator">:</span> <span class="token string">&quot;{{method}}&quot;</span><span class="token punctuation">,</span>
              url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/{{resource}}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
              <span class="token operator">...</span><span class="token function">parameters</span><span class="token punctuation">(</span><span class="token string">&quot;{{method}}&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                  <span class="token punctuation">{</span><span class="token punctuation">{</span>#parameter<span class="token punctuation">}</span><span class="token punctuation">}</span>
                  <span class="token punctuation">{</span><span class="token punctuation">{</span>parameter<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>parameter<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">^</span>last<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>last<span class="token punctuation">}</span><span class="token punctuation">}</span>
                  <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>parameter<span class="token punctuation">}</span><span class="token punctuation">}</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>method<span class="token punctuation">}</span><span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">parameters</span><span class="token punctuation">(</span><span class="token parameter">method<span class="token punctuation">,</span> parameters</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> method <span class="token operator">===</span> <span class="token string">&quot;get&quot;</span>
            <span class="token operator">?</span> <span class="token punctuation">{</span> params<span class="token operator">:</span> parameters <span class="token punctuation">}</span>
            <span class="token operator">:</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> parameters <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span>#method<span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span>method<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>method<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">^</span>last<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>last<span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>method<span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">/</span>resource<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>Note that mustache does not support <code>last</code> and it does not exist in the shadow of above schema. So <code>last</code> needs to be added to schema shadow for this template to work correctly.</p></details></blockquote><p>Now that its concepts and template are ready, client code can be generated during build time with the following script;</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> schema <span class="token operator">=</span> jc<span class="token punctuation">.</span>Schema<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&#39;photos.service.json&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;service.concepts.json&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> photosClient <span class="token operator">=</span> cs<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">&#39;client.template.js&#39;</span><span class="token punctuation">,</span> schema<span class="token punctuation">.</span>shadow<span class="token punctuation">)</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&#39;photos.client.js&#39;</span><span class="token punctuation">,</span> photosClient<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="without-concepts" tabindex="-1"><a class="header-anchor" href="#without-concepts" aria-hidden="true">#</a> Without Concepts</h2><p>Without using code generation, you would simply write the above code manually and maintain it for future updates of the back-end api. There are a couple of drawbacks worth mentioning here.</p><h3 id="syncing-with-new-services" tabindex="-1"><a class="header-anchor" href="#syncing-with-new-services" aria-hidden="true">#</a> Syncing With New Services</h3><p>You will maintain your client code manually with every back-end update. With code generation you will have the implementation right away, without any errors.</p><h3 id="lower-cost-of-change" tabindex="-1"><a class="header-anchor" href="#lower-cost-of-change" aria-hidden="true">#</a> Lower Cost of Change</h3><p>Since it is generated, you can change your design decisions to make it better at any time. For example, if you want to change <code>axios</code> to <code>fetch</code>, it would require a rewrite for the client layer without code generation. Another example, you may want to change the way you handle errors. If you use code generation, it won&#39;t cost you an extra.</p><h3 id="more-readable" tabindex="-1"><a class="header-anchor" href="#more-readable" aria-hidden="true">#</a> More Readable</h3><p>Things like error handling, logging and authentication are not necessarily have to be done through runtime mechanisms like interceptors. This is because it is not considered as code duplication when you generate the code.</p><h3 id="more-things-to-generate" tabindex="-1"><a class="header-anchor" href="#more-things-to-generate" aria-hidden="true">#</a> More Things To Generate</h3><p>You can make use of this schema to generate mock implementations and test data as well. This way you don&#39;t have to wait for the back-end team to develop these apis.</p><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> ‚Üê <a href="/json-concepts/use-cases/01-configuration-files.html" class="nav-link" aria-label="Configuration Files"><!--[--><!--]--> Configuration Files <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main></div><!----><!--]--></div>
    <script src="/json-concepts/assets/js/runtime~app.65f0731e.js" defer></script><script src="/json-concepts/assets/js/9296.a783a415.js" defer></script><script src="/json-concepts/assets/js/app.755d80b6.js" defer></script>
  </body>
</html>
